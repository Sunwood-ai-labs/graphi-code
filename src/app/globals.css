@tailwind base;
@tailwind components;
@tailwind utilities;

/* 涼雅カラーパレット定義 */
:root {
    /* ライトテーマ「涼雅」デフォルト */
    --primary-color: #025E73;
    --secondary-color: #038C8C;
    --accent-color: #04BFAD;
    --neon-gold: #F2C166;
    --bg-main: #FAFAFA;
    --bg-secondary: #F2F2F2;
    --text-primary: #024A5C;
    --text-secondary: #026B73;
    --border-color: #D1D5DB; /* Tailwind gray-300 */

    --primary-color-rgb: 2, 94, 115;
    --accent-color-rgb: 4, 191, 173;

    /* Alpha versions for theming */
    --current-primary-alpha-10: rgba(var(--primary-color-rgb), 0.1);
    --current-primary-alpha-20: rgba(var(--primary-color-rgb), 0.2);
    --current-primary-alpha-30: rgba(var(--primary-color-rgb), 0.3);
    --current-accent-alpha-20: rgba(var(--accent-color-rgb), 0.2);
    --current-accent-alpha-50: rgba(var(--accent-color-rgb), 0.5);

    /* テーマ切り替え用の共通変数 */
    --current-primary: var(--primary-color);
    --current-secondary: var(--secondary-color);
    --current-accent: var(--accent-color);
    --current-neon: var(--neon-gold);
    --current-bg-main: var(--bg-main);
    --current-bg-secondary: var(--bg-secondary);
    --current-text-primary: var(--text-primary);
    --current-text-secondary: var(--text-secondary);
    --current-border-color: var(--border-color);
}

/* ダークテーマ「夜涼」 */
[data-theme="dark"] {
    --primary-color: #04BFAD;
    --secondary-color: #F2C166;
    --accent-color: #038C8C;
    --neon-gold: #66D9EF;
    --bg-main: #0A1A1F;
    --bg-secondary: #1A2F35;
    --text-primary: #E8F4F8;
    --text-secondary: #B8D4E3;
    --border-color: #4B5563; /* Tailwind gray-600 */

    --primary-color-rgb: 4, 191, 173;
    --accent-color-rgb: 3, 140, 140;

    /* Alpha versions for dark theme */
    --current-primary-alpha-10: rgba(var(--primary-color-rgb), 0.1);
    --current-primary-alpha-20: rgba(var(--primary-color-rgb), 0.2);
    --current-primary-alpha-30: rgba(var(--primary-color-rgb), 0.3);
    --current-accent-alpha-20: rgba(var(--accent-color-rgb), 0.2);
    --current-accent-alpha-50: rgba(var(--accent-color-rgb), 0.5);

    /* Update current variables for dark theme */
    --current-primary: var(--primary-color);
    --current-secondary: var(--secondary-color);
    --current-accent: var(--accent-color);
    --current-neon: var(--neon-gold);
    --current-bg-main: var(--bg-main);
    --current-bg-secondary: var(--bg-secondary);
    --current-text-primary: var(--text-primary);
    --current-text-secondary: var(--text-secondary);
    --current-border-color: var(--border-color);
}

/* スムーズなテーマ切り替えアニメーション */
* {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* 基本設定 */
body {
    margin: 0;
    padding: 0;
    font-family: "M PLUS Rounded 1c", sans-serif;
    background-color: var(--current-bg-main);
    color: var(--current-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

html {
    height: 100%;
    scrollbar-width: thin;
    scrollbar-color: var(--current-text-secondary) var(--current-bg-secondary);
}

/* Navbar styling */
.navbar {
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    background: rgba(var(--current-bg-main-rgb, 250, 250, 250), 0.85); /* Needs RGB for opacity */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 0.75rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    color: var(--current-text-primary);
    border-bottom: 1px solid var(--current-border-color);
}
:root { --current-bg-main-rgb: 250, 250, 250; } /* For light theme navbar */
[data-theme="dark"] { --current-bg-main-rgb: 10, 26, 31; } /* For dark theme navbar */

[data-theme="dark"] .navbar {
    background: rgba(var(--current-bg-main-rgb), 0.85) !important;
}

.nav-brand {
    color: var(--current-primary);
    font-size: 1.5rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.nav-buttons {
    display: flex;
    gap: 0.75rem;
}

.nav-btn {
    background: var(--current-accent);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-family: "M PLUS Rounded 1c", sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
}
.nav-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Main content layout */
.main-content-area {
    flex-grow: 1;
    display: flex;
}

.editor-preview-pane {
  border-color: var(--current-border-color) !important; /* Override Tailwind if necessary */
  background-color: var(--current-bg-main) !important;
  /* h-full is applied in component, ensure it works with flex parent */
}
.editor-preview-pane.border-r { /* Specifically target the one with border-r if needed */
    border-right-width: 1px;
}


.section-header {
    font-size: 1.125rem;
    font-weight: 600;
    padding: 1rem;
    background-color: var(--current-bg-secondary);
    border-bottom: 1px solid var(--current-border-color);
    color: var(--current-text-primary);
    font-family: "Kaisei Decol", serif;
}

/* CodeMirror Editor Theming */
/* Wrapper for HtmlEditor component if needed, or style CodeMirror's own wrapper */
/* The .cm-editor class is usually the outermost CodeMirror generated div */
.cm-editor {
    height: 100% !important; /* Ensure it fills container */
    outline: none !important; /* Remove default outline */
}

/* Live Preview Area */
.live-preview-container { /* Applied to the div wrapping the LivePreview component's output div */
  background-color: var(--current-bg-main); /* Or --current-bg-secondary for contrast */
  color: var(--current-text-primary);
  border: 1px solid var(--current-border-color);
  /* padding is on the inner div now in LivePreview.tsx */
  height: 100%;
  overflow: auto;
}

/* Visual cue for contentEditable elements in LivePreview */
[data-editable="true"][contenteditable="true"] {
  outline: 1px dashed var(--current-accent) !important;
  cursor: text !important;
  transition: outline 0.2s ease-in-out;
}
[data-editable="true"][contenteditable="true"]:hover {
  outline-color: var(--current-primary) !important;
}
[data-editable="true"][contenteditable="true"]:focus {
  outline-width: 2px !important;
  outline-style: solid !important;
  outline-color: var(--current-primary) !important;
}

/* Default styles for HTML elements in Live Preview (Wa-Modern aesthetic) */
.live-preview-container h1, .live-preview-container h2, .live-preview-container h3, .live-preview-container h4, .live-preview-container h5, .live-preview-container h6 {
  font-family: "Kaisei Decol", serif;
  color: var(--current-primary);
  margin-top: 1.5em;
  margin-bottom: 0.75em;
  line-height: 1.3;
}
.live-preview-container h1 { font-size: 2em; } /* Slightly reduced from 2.25 */
.live-preview-container h2 { font-size: 1.75em; } /* Slightly reduced from 1.875 */
.live-preview-container h3 { font-size: 1.375em; } /* Slightly reduced from 1.5 */

.live-preview-container p {
  font-family: "M PLUS Rounded 1c", sans-serif;
  color: var(--current-text-primary);
  line-height: 1.7;
  margin-bottom: 1em;
}

.live-preview-container a {
  color: var(--current-accent);
  text-decoration: none;
  border-bottom: 1px dashed var(--current-accent);
}
.live-preview-container a:hover {
  color: var(--current-primary);
  border-bottom-style: solid;
}

.live-preview-container ul, .live-preview-container ol {
  margin-left: 1.5em; /* Reduced from 2em */
  margin-bottom: 1em;
  padding-left: 0.5em;
}
.live-preview-container ul li::marker { color: var(--current-accent); }
.live-preview-container ol li::marker { color: var(--current-accent); }

.live-preview-container li {
  margin-bottom: 0.5em;
  line-height: 1.6;
  padding-left: 0.5em; /* Space out marker a bit */
}

.live-preview-container blockquote {
  border-left: 3px solid var(--current-accent);
  padding: 0.5em 1em; /* Added vertical padding */
  margin: 1em 0; /* Adjusted margin */
  font-style: italic;
  color: var(--current-text-secondary);
  background-color: var(--current-bg-secondary); /* Subtle background */
  border-radius: 0 4px 4px 0; /* Rounded corner */
}

.live-preview-container pre, .live-preview-container code:not(pre code) {
  font-family: 'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace;
  background-color: var(--current-bg-secondary);
  color: var(--current-text-primary); /* Ensure text color contrasts with bg */
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  border: 1px solid var(--current-border-color); /* Border for inline code */
}
.live-preview-container pre {
  padding: 1em;
  overflow-x: auto;
  border-radius: 4px; /* Consistent border radius */
}
.live-preview-container code {
  word-wrap: break-word;
}


.live-preview-container table {
  width: 100%;
  border-collapse: separate; /* Changed for spacing and rounded corners */
  border-spacing: 0;
  margin-bottom: 1em;
  font-family: "M PLUS Rounded 1c", sans-serif;
  border: 1px solid var(--current-border-color);
  border-radius: 4px;
}
.live-preview-container th, .live-preview-container td {
  border-bottom: 1px solid var(--current-border-color);
  padding: 0.75em 1em;
  text-align: left;
}
.live-preview-container tr:last-child td {
    border-bottom: none;
}
.live-preview-container th {
  background-color: var(--current-bg-secondary);
  color: var(--current-primary);
  font-weight: bold;
  font-family: "Kaisei Decol", serif; /* Headers in Kaisei */
  border-bottom-width: 2px; /* Stronger border for header row */
}


.live-preview-container hr {
  border: none;
  border-top: 2px dashed var(--current-border-color); /* Dashed HR */
  margin: 2em 0;
}

/* Font classes from example (optional, can be applied directly in components) */
.kaisei-decol-regular { font-family: "Kaisei Decol", serif; font-weight: 400; font-style: normal; }
.kaisei-decol-bold { font-family: "Kaisei Decol", serif; font-weight: 700; font-style: normal; }
.m-plus-rounded-1c-regular { font-family: "M PLUS Rounded 1c", sans-serif; font-weight: 400; font-style: normal; }
.m-plus-rounded-1c-bold { font-family: "M PLUS Rounded 1c", sans-serif; font-weight: 700; font-style: normal; }

/* Scrollbar theming for Webkit browsers */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: var(--current-bg-secondary); border-radius: 5px; }
::-webkit-scrollbar-thumb { background: var(--current-text-secondary); border-radius: 5px; border: 2px solid var(--current-bg-secondary); }
::-webkit-scrollbar-thumb:hover { background: var(--current-primary); }
::-webkit-scrollbar-corner { background: transparent; }

/* CodeMirror specific syntax highlighting (ensure these are defined if not using a pre-built CM theme that defines them) */
/* These are examples; a full CodeMirror theme has many more selectors.
   The EditorView.theme in HtmlEditor.tsx provides the base theming.
   These specific token styles supplement it or can be part of a larger custom CM theme object. */
.cm-keyword { color: var(--current-accent) !important; }
.cm-atom { color: var(--current-secondary) !important; }
.cm-number { color: #AE81FF !important; } /* Using a distinct color for numbers */
.cm-def { color: var(--current-text-primary) !important; font-weight: bold; }
.cm-variable { color: var(--current-text-primary) !important; }
.cm-variable-2 { color: var(--current-primary) !important; }
.cm-variable-3, .cm-type { color: #FD971F !important; } /* Orange for types/var-3 */
.cm-property { color: var(--current-secondary) !important; font-style: italic; }
.cm-operator { color: var(--current-text-secondary) !important; }
.cm-comment { color: var(--current-text-secondary) !important; font-style: italic; }
.cm-string { color: #A6E22E !important; } /* Green for strings */
.cm-string-2 { color: var(--current-accent) !important; } /* Different string type */
.cm-meta { color: #75715E !important; } /* Gray for meta tags */
.cm-qualifier { color: #525252 !important; }
.cm-builtin { color: var(--current-primary) !important; font-weight: bold; }
.cm-bracket { color: var(--current-text-secondary) !important; }
.cm-tag { color: #F92672 !important; } /* Pink for HTML tags */
.cm-attribute { color: #66D9EF !important; } /* Cyan for HTML attributes */
.cm-hr { color: var(--current-border-color) !important; }
.cm-link { color: var(--current-accent) !important; text-decoration: underline !important; }
.cm-error { background-color: rgba(255,0,0,0.2) !important; color: red !important; }
