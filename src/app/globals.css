@tailwind base;
@tailwind components;
@tailwind utilities;

/* 涼雅カラーパレット定義 */
:root {
    /* ライトテーマ「涼雅」デフォルト */
    --primary-color: #025E73;
    --secondary-color: #038C8C;
    --accent-color: #04BFAD;
    --neon-gold: #F2C166;
    --bg-main: #FAFAFA; /* Was --bg-light */
    --bg-secondary: #F2F2F2; /* Was --bg-dark, for elements on bg-main */
    --text-primary: #024A5C;
    --text-secondary: #026B73;
    --border-color: #D1D5DB; /* Tailwind gray-300 for initial consistency */

    /* テーマ切り替え用の共通変数 */
    --current-primary: var(--primary-color);
    --current-secondary: var(--secondary-color);
    --current-accent: var(--accent-color);
    --current-neon: var(--neon-gold);
    --current-bg-main: var(--bg-main);
    --current-bg-secondary: var(--bg-secondary);
    --current-text-primary: var(--text-primary);
    --current-text-secondary: var(--text-secondary);
    --current-border-color: var(--border-color);
}

/* ダークテーマ「夜涼」 */
[data-theme="dark"] {
    --primary-color: #04BFAD;
    --secondary-color: #F2C166;
    --accent-color: #038C8C;
    --neon-gold: #66D9EF; /* Example used different neon for dark */
    --bg-main: #0A1A1F;
    --bg-secondary: #1A2F35;
    --text-primary: #E8F4F8;
    --text-secondary: #B8D4E3;
    --border-color: #4B5563; /* Tailwind gray-600 for dark */

    /* Update current variables for dark theme */
    --current-primary: var(--primary-color);
    --current-secondary: var(--secondary-color);
    --current-accent: var(--accent-color);
    --current-neon: var(--neon-gold);
    --current-bg-main: var(--bg-main);
    --current-bg-secondary: var(--bg-secondary);
    --current-text-primary: var(--text-primary);
    --current-text-secondary: var(--text-secondary);
    --current-border-color: var(--border-color);
}

/* スムーズなテーマ切り替えアニメーション */
* {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* 基本設定 */
body {
    margin: 0;
    padding: 0;
    font-family: "M PLUS Rounded 1c", sans-serif; /* Applied M PLUS Rounded 1c as base */
    background-color: var(--current-bg-main);
    color: var(--current-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    display: flex; /* Ensure body takes full height for flex column layout in RootLayout */
    flex-direction: column;
    min-height: 100vh;
}

/* CodeMirror theming (basic) - might need more specific selectors if CodeMirror version/theme is known */
.cm-s-default, .CodeMirror { /* A common CodeMirror class, adjust if necessary */
    background-color: var(--current-bg-secondary) !important;
    color: var(--current-text-primary) !important;
    border: 1px solid var(--current-border-color);
}
.cm-s-default .CodeMirror-gutters, .CodeMirror-gutters {
    background-color: var(--current-bg-secondary) !important;
    border-right: 1px solid var(--current-border-color) !important;
}
.cm-s-default .CodeMirror-guttermarker, .CodeMirror-guttermarker,
.cm-s-default .CodeMirror-guttermarker-subtle, .CodeMirror-guttermarker-subtle,
.cm-s-default .CodeMirror-linenumber, .CodeMirror-linenumber {
    color: var(--current-text-secondary) !important;
}
.cm-s-default .CodeMirror-cursor, .CodeMirror-cursor {
    border-left: 1px solid var(--current-text-primary) !important;
}
.cm-s-default .cm-keyword, .cm-keyword { color: var(--current-accent) !important; }
.cm-s-default .cm-atom, .cm-atom { color: var(--current-secondary) !important; }
.cm-s-default .cm-number, .cm-number { color: #AE81FF !important; } /* Example purple, pick from theme if available */
.cm-s-default .cm-def, .cm-def { color: var(--current-text-primary) !important; }
.cm-s-default .cm-variable, .cm-variable,
.cm-s-default .cm-property, .cm-property,
.cm-s-default .cm-operator, .cm-operator { color: var(--current-text-primary) !important; }
.cm-s-default .cm-variable-2, .cm-variable-2 { color: var(--current-primary) !important; }
.cm-s-default .cm-variable-3, .cm-variable-3, .cm-s-default .cm-type, .cm-type { color: #FD971F !important; } /* Example orange */
.cm-s-default .cm-comment, .cm-comment { color: var(--current-text-secondary) !important; font-style: italic; }
.cm-s-default .cm-string, .cm-string { color: #A6E22E !important; } /* Example green */
.cm-s-default .cm-string-2, .cm-string-2 { color: var(--current-accent) !important; }
.cm-s-default .cm-meta, .cm-meta { color: #75715E !important; } /* Example gray */
.cm-s-default .cm-qualifier, .cm-qualifier { color: #525252 !important; }
.cm-s-default .cm-builtin, .cm-builtin { color: var(--current-secondary) !important; }
.cm-s-default .cm-bracket, .cm-bracket { color: #F8F8F2 !important; }
.cm-s-default .cm-tag, .cm-tag { color: #F92672 !important; } /* Example pink */
.cm-s-default .cm-attribute, .cm-attribute { color: #66D9EF !important; } /* Example cyan */
.cm-s-default .cm-hr, .cm-hr { color: #75715E !important; }
.cm-s-default .cm-link, .cm-link { color: var(--current-accent) !important; }
.cm-s-default .cm-error, .cm-error { color: #F92672 !important; }
.CodeMirror-selected {
    background-color: rgba(var(--current-primary-rgb, 2, 94, 115), 0.3) !important; /* Needs RGB version of primary */
}
[data-theme="dark"] .CodeMirror-selected {
    background-color: rgba(var(--current-primary-rgb-dark, 4, 191, 173), 0.3) !important; /* Needs RGB version of primary for dark */
}


/* Live Preview Area */
.live-preview-container {
    background-color: var(--current-bg-main);
    color: var(--current-text-primary);
    border: 1px solid var(--current-border-color);
    padding: 1rem;
    overflow: auto;
    height: 100%; /* Ensure it fills available space */
}

/* General Application Layout Styling */
/* Assuming layout.tsx will have a structure like:
<body>
  <nav className="navbar ...">...</nav>
  <main className="main-content ...">{children}</main> // children is EditorPage
</body>
*/

/* Navbar styling from example */
.navbar {
    position: sticky; /* Changed from fixed to sticky for better flow with Next.js */
    top: 0;
    left: 0;
    right: 0;
    z-index: 50; /* Tailwind's z-50 */
    background: rgba(250, 250, 250, 0.85); /* --current-bg-main with opacity */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 0.75rem 1.5rem; /* 12px 24px */
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    color: var(--current-text-primary);
    border-bottom: 1px solid var(--current-border-color);
}

[data-theme="dark"] .navbar {
    background: rgba(10, 26, 31, 0.85) !important; /* --current-bg-main (dark) with opacity */
}

.nav-brand {
    color: var(--current-primary);
    font-size: 1.5rem; /* kaisei-decol-bold will be applied in component */
    font-weight: 700; /* Duplicates kaisei-decol-bold but good fallback */
    display: flex;
    align-items: center;
    gap: 0.5rem; /* 8px */
}

.nav-buttons {
    display: flex;
    gap: 0.75rem; /* 12px */
}

.nav-btn {
    background: var(--current-accent);
    color: white;
    border: none;
    padding: 0.5rem 1rem; /* 8px 16px */
    border-radius: 0.75rem; /* 12px */
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.375rem; /* 6px */
    font-family: "M PLUS Rounded 1c", sans-serif; /* Ensure button font */
    font-size: 0.9rem;
    font-weight: 500; /* Added for better visibility */
}

.nav-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.main-content-area {
    flex-grow: 1; /* Make main content area take remaining vertical space */
    display: flex; /* This will be the container for editor and preview */
    /* Default to row, but EditorPage might switch to column on small screens */
    /* The two-column layout (w-1/2) is handled by EditorPage's Tailwind classes */
}

/* Styling for the headers of editor/preview sections if they exist */
.section-header {
    font-size: 1.125rem; /* text-lg */
    font-weight: 600; /* font-semibold */
    padding: 1rem; /* p-4 */
    background-color: var(--current-bg-secondary);
    border-bottom: 1px solid var(--current-border-color);
    color: var(--current-text-primary);
    font-family: "Kaisei Decol", serif; /* Use Kaisei for headers */
}


/* Responsive adjustments for navbar */
@media (max-width: 768px) {
    .nav-brand {
        font-size: 1.2rem !important;
    }
    .nav-buttons {
        gap: 0.5rem !important; /* 8px */
    }
    .nav-btn {
        padding: 0.375rem 0.75rem !important; /* 6px 12px */
        font-size: 0.8rem !important;
    }
    .main-content-area {
      flex-direction: column; /* Stack editor and preview on smaller screens */
    }
}

/* Font classes from example (optional, can be applied directly in components) */
.kaisei-decol-regular {
    font-family: "Kaisei Decol", serif;
    font-weight: 400;
    font-style: normal;
}

.kaisei-decol-bold {
    font-family: "Kaisei Decol", serif;
    font-weight: 700;
    font-style: normal;
}

.m-plus-rounded-1c-regular {
    font-family: "M PLUS Rounded 1c", sans-serif;
    font-weight: 400;
    font-style: normal;
}

.m-plus-rounded-1c-bold {
    font-family: "M PLUS Rounded 1c", sans-serif;
    font-weight: 700;
    font-style: normal;
}

/* Ensure html and body take full height */
html {
    height: 100%;
}
/* Remove Tailwind's default body background if applying our own */
/* body { background-color: transparent; } */

/* Tailwind utility overrides if needed, or prefer applying new classes */
/* Example:
.bg-gray-100 { background-color: var(--current-bg-main) !important; }
.border-gray-300 { border-color: var(--current-border-color) !important; }
*/

/* Define RGB versions of primary colors for CodeMirror selection */
:root {
    --primary-color-rgb: 2, 94, 115;
    --primary-color-rgb-dark: 4, 191, 173;
}
[data-theme="dark"] {
    --current-primary-rgb: var(--primary-color-rgb-dark);
}
:root { /* Light theme default for current-primary-rgb */
    --current-primary-rgb: var(--primary-color-rgb);
}

/* Tailwind class overrides for EditorPage structure */
.editor-preview-pane {
  /* This class would be applied to the parent div of HtmlEditor and LivePreview in EditorPage */
  /* Or directly style the w-1/2 divs if they don't have a common parent class */
  border-color: var(--current-border-color);
  background-color: var(--current-bg-main); /* Ensure pane background matches */
}

.editor-preview-pane > .flex-grow { /* Target the div that wraps HtmlEditor/LivePreview component */
  overflow: auto;
  border: 1px solid var(--current-border-color); /* Add border around editor/preview content area */
  border-top: none; /* Header has bottom border, so remove top border here */
}

/* LivePreview iframe specific styling if needed */
/* For example, to ensure its body also gets themed if it's a simple srcDoc iframe */
/* This is highly dependent on how LivePreview is implemented */
.live-preview-iframe {
  background-color: var(--current-bg-main);
  color: var(--current-text-primary);
}
